{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/upload/./src/admin/components/InspectMimeModal.js","webpack://@fof/upload/./src/admin/components/UploadPage.js","webpack://@fof/upload/./src/admin/components/index.ts","webpack://@fof/upload/./src/admin/index.ts","webpack://@fof/upload/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/upload/webpack/bootstrap","webpack://@fof/upload/webpack/runtime/compat get default export","webpack://@fof/upload/webpack/runtime/define property getters","webpack://@fof/upload/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/upload/webpack/runtime/make namespace object","webpack://@fof/upload/./admin.js"],"sourcesContent":["import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class InspectMimeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.uploading = false;\n    this.inspection = {};\n  }\n\n  className() {\n    return 'Modal--small fof-upload-inspect-mime-modal';\n  }\n\n  title() {\n    return app.translator.trans('fof-upload.admin.inspect-mime.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>\n          {app.translator.trans('fof-upload.admin.inspect-mime.description', {\n            a: <a href=\"https://github.com/SoftCreatR/php-mime-detector\"></a>,\n          })}\n        </p>\n        <p>{app.translator.trans('fof-upload.admin.inspect-mime.select')}</p>\n        <div>\n          <input type=\"file\" onchange={this.onupload.bind(this)} disabled={this.uploading} />\n          {this.uploading ? LoadingIndicator.component() : null}\n        </div>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.laravel-validation')}</dt>\n          <dd>\n            {typeof this.inspection.laravel_validation === 'undefined' ? (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.no-file-selected')}</em>\n            ) : this.inspection.laravel_validation ? (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-passed')\n            ) : (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-failed', {\n                error: this.inspection.laravel_validation_error || '?',\n              })\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-detector')}</dt>\n          <dd>\n            {this.inspection.mime_detector ? (\n              <code>{this.inspection.mime_detector}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-fileinfo')}</dt>\n          <dd>\n            {this.inspection.php_mime ? (\n              <code>{this.inspection.php_mime}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.guessed-extension')}</dt>\n          <dd>\n            {this.inspection.guessed_extension ? (\n              <code>{this.inspection.guessed_extension}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n      </div>\n    );\n  }\n\n  onupload(event) {\n    const body = new FormData();\n\n    for (let i = 0; i < event.target.files.length; i++) {\n      body.append('files[]', event.target.files[i]);\n    }\n\n    this.uploading = true;\n\n    return app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/inspect-mime',\n        serialize: (raw) => raw,\n        body,\n      })\n      .then((result) => {\n        this.uploading = false;\n        this.inspection = result;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.uploading = false;\n        this.inspection = {};\n        m.redraw();\n\n        throw error;\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport InspectMimeModal from './InspectMimeModal';\nimport icon from 'flarum/common/helpers/icon';\nimport Link from 'flarum/common/components/Link';\n\n/* global m */\n\nexport default class UploadPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    // whether we are saving the settings or not right now\n    this.loading = false;\n\n    // the fields we need to watch and to save\n    this.fields = [\n      // image\n      'resizeMaxWidth',\n      'cdnUrl',\n      'maxFileSize',\n      'whitelistedClientExtensions',\n      'composerButtonVisiblity',\n      // watermark\n      'watermark',\n      'watermarkPosition',\n      // Imgur\n      'imgurClientId',\n      // AWS\n      'awsS3Key',\n      'awsS3Secret',\n      'awsS3Bucket',\n      'awsS3Region',\n      'awsS3Endpoint',\n      'awsS3ACL',\n      // QIniu\n      'qiniuKey',\n      'qiniuSecret',\n      'qiniuBucket',\n    ];\n\n    // the checkboxes we need to watch and to save.\n    this.checkboxes = ['mustResize', 'addsWatermarks', 'disableHotlinkProtection', 'disableDownloadLogging', 'awsS3UsePathStyleEndpoint'];\n\n    // fields that are objects\n    this.objects = ['mimeTypes'];\n\n    // watermark positions\n    this.watermarkPositions = {\n      'top-left': 'top-left',\n      'top-right': 'top-right',\n      'bottom-left': 'bottom-left',\n      'bottom-right': 'bottom-right',\n      center: 'center',\n      left: 'left',\n      top: 'top',\n      right: 'right',\n      bottom: 'bottom',\n    };\n\n    // Composer button options\n    this.composerButtonVisiblityOptions = {\n      both: app.translator.trans('fof-upload.admin.labels.composer_buttons.options.both'),\n      'upload-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.upload-btn'),\n      'media-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.media-btn'),\n    };\n\n    // get the saved settings from the database\n    const settings = app.data.settings;\n\n    // our package prefix (to be added to every field and checkbox in the setting table)\n    this.settingsPrefix = 'fof-upload';\n\n    // Options for the Upload methods dropdown menu.\n    this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n    // Options for the Template dropdown menu.\n    this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n    // Contains current values.\n    this.values = {};\n    // bind the values of the fields and checkboxes to the getter/setter functions\n    this.fields.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)])));\n    this.checkboxes.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)] === '1')));\n    this.objects.forEach((key) => (this.values[key] = settings[this.addPrefix(key)] ? Stream(JSON.parse(settings[this.addPrefix(key)])) : Stream()));\n\n    // Set a sane default in case no mimeTypes have been configured yet.\n    // Since 'local' (or others) can now be disabled, pick the last entry in the object for default\n    this.defaultAdap = Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length - 1];\n    this.values.mimeTypes() ||\n      (this.values.mimeTypes = Stream({\n        '^image\\\\/.*': {\n          adapter: this.defaultAdap,\n          template: 'image-preview',\n        },\n      }));\n\n    this.newMimeType = {\n      regex: Stream(''),\n      adapter: Stream(this.defaultAdap),\n      template: Stream('file'),\n    };\n  }\n\n  /**\n   * Show the actual ImageUploadPage.\n   *\n   * @returns {*}\n   */\n  content() {\n    const max_post = app.data.settings[this.addPrefix('php_ini.post_max_size')];\n    const max_upload = app.data.settings[this.addPrefix('php_ini.upload_max_filesize')];\n    return [\n      m('.UploadPage', [\n        m('.container', [\n          m(\n            'form',\n            {\n              onsubmit: this.onsubmit.bind(this),\n            },\n            [\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.preferences.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.max_file_size')),\n                m('input.FormControl', {\n                  value: this.values.maxFileSize() || 2048,\n                  oninput: withAttr('value', this.values.maxFileSize),\n                  type: 'number',\n                  min: '0',\n                }),\n                m(\n                  '.helpText',\n                  app.translator.trans('fof-upload.admin.labels.preferences.php_ini_values', {\n                    post: max_post,\n                    upload: max_upload,\n                  })\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.mime_types')),\n                m(\n                  '.MimeTypes--Container',\n                  Object.keys(this.values.mimeTypes()).map((mime) => {\n                    let config = this.values.mimeTypes()[mime];\n                    // Compatibility for older versions.\n                    if (typeof config !== 'object') {\n                      config = {\n                        adapter: config,\n                        template: 'file',\n                      };\n                    }\n\n                    return m('div', [\n                      m('input.FormControl.MimeTypes', {\n                        value: mime,\n                        oninput: withAttr('value', this.updateMimeTypeKey.bind(this, mime)),\n                      }),\n                      Select.component({\n                        options: this.uploadMethodOptions,\n                        onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                        value: config.adapter || 'local',\n                      }),\n                      Select.component({\n                        options: this.getTemplateOptionsForInput(),\n                        onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                        value: config.template || 'local',\n                      }),\n                      Button.component(\n                        {\n                          type: 'button',\n                          className: 'Button Button--warning',\n                          onclick: this.deleteMimeType.bind(this, mime),\n                        },\n                        'x'\n                      ),\n                    ]);\n                  }),\n                  m('br'),\n                  m('div', [\n                    m('input.FormControl.MimeTypes.add-MimeType-key', {\n                      value: this.newMimeType.regex(),\n                      oninput: withAttr('value', this.newMimeType.regex),\n                    }),\n                    Select.component({\n                      options: this.uploadMethodOptions,\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.adapter),\n                      value: this.newMimeType.adapter(),\n                    }),\n                    Select.component({\n                      options: this.getTemplateOptionsForInput(),\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.template),\n                      value: this.newMimeType.template(),\n                    }),\n                    Button.component(\n                      {\n                        type: 'button',\n                        className: 'Button Button--warning',\n                        onclick: this.addMimeType.bind(this),\n                      },\n                      '+'\n                    ),\n                  ])\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.mime_types')),\n                Button.component(\n                  {\n                    className: 'Button',\n                    onclick() {\n                      app.modal.show(InspectMimeModal);\n                    },\n                  },\n                  app.translator.trans('fof-upload.admin.labels.inspect-mime')\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.download_templates')),\n                this.templateOptionsDescriptions(),\n              ]),\n              m('fieldset.composerButtons', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.composer_buttons.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.composer_buttons')),\n                m('div', [\n                  Select.component({\n                    options: this.composerButtonVisiblityOptions,\n                    onchange: this.values.composerButtonVisiblity,\n                    value: this.values.composerButtonVisiblity() || 'both',\n                  }),\n                ]),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.resize.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.resize')),\n                Switch.component(\n                  {\n                    state: this.values.mustResize() || false,\n                    onchange: this.values.mustResize,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.resize.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.resize.max_width')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.resizeMaxWidth() || 100,\n                  oninput: withAttr('value', this.values.resizeMaxWidth),\n                  disabled: !this.values.mustResize(),\n                  type: 'number',\n                  min: '0',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.client_extension.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.client_extension')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.whitelistedClientExtensions() || '',\n                  oninput: withAttr('value', this.values.whitelistedClientExtensions),\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.watermark.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.watermark')),\n                Switch.component(\n                  {\n                    state: this.values.addsWatermarks() || false,\n                    onchange: this.values.addsWatermarks,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.watermark.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.watermark.position')),\n                m('div', [\n                  Select.component({\n                    options: this.watermarkPositions,\n                    onchange: this.values.watermarkPosition,\n                    value: this.values.watermarkPosition() || 'bottom-right',\n                  }),\n                ]),\n                m('label', {}, app.translator.trans('fof-upload.admin.labels.watermark.file')),\n                UploadImageButton.component({\n                  name: 'fof/watermark',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-hotlink-protection')),\n                Switch.component(\n                  {\n                    state: this.values.disableHotlinkProtection() || false,\n                    onchange: this.values.disableHotlinkProtection,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.toggle')\n                ),\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-download-logging.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-download-logging')),\n                Switch.component(\n                  {\n                    state: this.values.disableDownloadLogging() || false,\n                    onchange: this.values.disableDownloadLogging,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-download-logging.toggle')\n                ),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.local.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.local.cdn_url')),\n                m('input.FormControl', {\n                  value: this.values.cdnUrl() || '',\n                  oninput: withAttr('value', this.values.cdnUrl),\n                }),\n              ]),\n\n              this.adaptorItems().toArray(),\n\n              Button.component(\n                {\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  loading: this.loading,\n                  disabled: !this.changed(),\n                },\n                app.translator.trans('core.admin.settings.submit_button')\n              ),\n            ]\n          ),\n        ]),\n      ]),\n    ];\n  }\n\n  adaptorItems() {\n    const items = new ItemList();\n\n    if (this.uploadMethodOptions['imgur'] !== undefined) {\n      items.add(\n        'imgur',\n        <div className=\"imgur\">\n          <fieldset>\n            <legend>{app.translator.trans('fof-upload.admin.labels.imgur.title')}</legend>\n            <p>\n              {icon('fas fa-exclamation-circle')}{' '}\n              {app.translator.trans('fof-upload.admin.labels.imgur.tos', {\n                a: <Link href=\"https://imgur.com/tos\" external={true} target=\"_blank\" />,\n              })}\n            </p>\n            <label>{app.translator.trans('fof-upload.admin.labels.imgur.client_id')}</label>\n            <input className=\"FormControl\" value={this.values.imgurClientId() || ''} oninput={withAttr('value', this.values.imgurClientId)} />\n          </fieldset>\n        </div>,\n        100\n      );\n    }\n\n    if (this.uploadMethodOptions['qiniu'] !== undefined) {\n      items.add(\n        'qiniu',\n        m('.qiniu', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.qiniu.title')),\n            m('label', app.translator.trans('fof-upload.admin.labels.qiniu.key')),\n            m('input.FormControl', {\n              value: this.values.qiniuKey() || '',\n              oninput: withAttr('value', this.values.qiniuKey),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.secret')),\n            m('input.FormControl', {\n              value: this.values.qiniuSecret() || '',\n              oninput: withAttr('value', this.values.qiniuSecret),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.bucket')),\n            m('input.FormControl', {\n              value: this.values.qiniuBucket() || '',\n              oninput: withAttr('value', this.values.qiniuBucket),\n            }),\n          ]),\n        ]),\n        80\n      );\n    }\n\n    if (this.uploadMethodOptions['aws-s3'] !== undefined) {\n      items.add(\n        'aws-s3',\n        m('.aws', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_instance_profile')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.key')),\n            m('input.FormControl', {\n              value: this.values.awsS3Key() || '',\n              oninput: withAttr('value', this.values.awsS3Key),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.secret')),\n            m('input.FormControl', {\n              value: this.values.awsS3Secret() || '',\n              oninput: withAttr('value', this.values.awsS3Secret),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.bucket')),\n            m('input.FormControl', {\n              value: this.values.awsS3Bucket() || '',\n              oninput: withAttr('value', this.values.awsS3Bucket),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.region')),\n            m('input.FormControl', {\n              value: this.values.awsS3Region() || '',\n              oninput: withAttr('value', this.values.awsS3Region),\n            }),\n          ]),\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.advanced_title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_compatible_storage')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.endpoint')),\n            m('input.FormControl', {\n              value: this.values.awsS3Endpoint() || '',\n              oninput: withAttr('value', this.values.awsS3Endpoint),\n            }),\n            Switch.component(\n              {\n                state: this.values.awsS3UsePathStyleEndpoint() || false,\n                onchange: this.values.awsS3UsePathStyleEndpoint,\n              },\n              app.translator.trans('fof-upload.admin.labels.aws-s3.use_path_style_endpoint')\n            ),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.acl')),\n            m('input.FormControl', {\n              value: this.values.awsS3ACL() || '',\n              oninput: withAttr('value', this.values.awsS3ACL),\n            }),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_acl')),\n          ]),\n        ]),\n        60\n      );\n    }\n\n    return items;\n  }\n\n  getTemplateOptionsForInput() {\n    const options = {};\n\n    for (let option in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(option)) {\n        continue;\n      }\n\n      options[option] = this.templateOptions[option].name;\n    }\n\n    return options;\n  }\n\n  updateMimeTypeKey(mime, value) {\n    this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n    this.deleteMimeType(mime);\n  }\n\n  updateMimeTypeAdapter(mime, config, value) {\n    config.adapter = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  updateMimeTypeTemplate(mime, config, value) {\n    config.template = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  deleteMimeType(mime) {\n    delete this.values.mimeTypes()[mime];\n  }\n\n  templateOptionsDescriptions() {\n    const children = [];\n\n    for (let template in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(template)) {\n        continue;\n      }\n\n      children.push(\n        <li>\n          {this.templateOptions[template].name}: {m.trust(this.templateOptions[template].description)}\n        </li>\n      );\n    }\n\n    return m('ul', children);\n  }\n\n  addMimeType() {\n    this.values.mimeTypes()[this.newMimeType.regex()] = {\n      adapter: this.newMimeType.adapter(),\n      template: this.newMimeType.template(),\n    };\n\n    this.newMimeType.regex('');\n    this.newMimeType.adapter('local');\n    this.newMimeType.template('file');\n  }\n\n  /**\n   * Checks if the values of the fields and checkboxes are different from\n   * the ones stored in the database\n   *\n   * @returns boolean\n   */\n  changed() {\n    const fieldsCheck = this.fields.some((key) => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    const checkboxesCheck = this.checkboxes.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] === '1'));\n    const objectsCheck = this.objects.some((key) => JSON.stringify(this.values[key]()) !== app.data.settings[this.addPrefix(key)]);\n\n    return fieldsCheck || checkboxesCheck || objectsCheck;\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  onsubmit(e) {\n    // prevent the usual form submit behaviour\n    e.preventDefault();\n\n    // if the page is already saving, do nothing\n    if (this.loading) return;\n\n    // prevents multiple savings\n    this.loading = true;\n\n    // remove previous success popup\n    app.alerts.dismiss(this.successAlert);\n\n    const settings = {};\n\n    // gets all the values from the form\n    this.fields.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.checkboxes.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.objects.forEach((key) => (settings[this.addPrefix(key)] = JSON.stringify(this.values[key]())));\n\n    // actually saves everything in the database\n    saveSettings(settings)\n      .then(() => {\n        // on success, show popup\n        this.successAlert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('core.admin.settings.saved_message'));\n      })\n      .catch(() => {})\n      .then(() => {\n        // return to the initial state and redraw the page\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  /**\n   * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n   *\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n}\n","import UploadPage from './UploadPage';\n\nexport const components = {\n  UploadPage,\n};\n","import app from 'flarum/admin/app';\nimport UploadPage from './components/UploadPage';\n\nexport * from './components';\n\napp.initializers.add('fof-upload', () => {\n  app.extensionData\n    .for('fof-upload')\n    .registerPage(UploadPage)\n    .registerPermission(\n      {\n        icon: 'far fa-file',\n        label: app.translator.trans('fof-upload.admin.permissions.upload_label'),\n        permission: 'fof-upload.upload',\n      },\n      'start',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-download',\n        label: app.translator.trans('fof-upload.admin.permissions.download_label'),\n        permission: 'fof-upload.download',\n        allowGuest: true,\n      },\n      'view',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-eye',\n        label: app.translator.trans('fof-upload.admin.permissions.view_user_uploads_label'),\n        permission: 'fof-upload.viewUserUploads',\n      },\n      'moderate',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-trash',\n        label: app.translator.trans('fof-upload.admin.permissions.delete_uploads_of_others_label'),\n        permission: 'fof-upload.deleteUserUploads',\n      },\n      'moderate',\n      50\n    );\n});\n","module.exports = flarum.core.compat['admin/app'];","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['admin/components/UploadImageButton'];","module.exports = flarum.core.compat['admin/utils/saveSettings'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/withAttr'];","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/admin';\n"],"names":["app","Modal","LoadingIndicator","InspectMimeModal","oninit","vnode","uploading","inspection","className","title","translator","trans","content","a","onupload","bind","component","laravel_validation","error","laravel_validation_error","mime_detector","php_mime","guessed_extension","event","body","FormData","i","target","files","length","append","request","method","url","forum","attribute","serialize","raw","then","result","m","redraw","Button","saveSettings","Alert","Select","Switch","UploadImageButton","withAttr","Stream","ExtensionPage","ItemList","icon","Link","UploadPage","loading","fields","checkboxes","objects","watermarkPositions","center","left","top","right","bottom","composerButtonVisiblityOptions","both","settings","data","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","values","forEach","key","JSON","parse","defaultAdap","Object","keys","mimeTypes","adapter","template","newMimeType","regex","max_post","max_upload","onsubmit","value","maxFileSize","oninput","type","min","post","upload","map","mime","config","updateMimeTypeKey","options","onchange","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","onclick","deleteMimeType","addMimeType","modal","show","templateOptionsDescriptions","composerButtonVisiblity","state","mustResize","resizeMaxWidth","disabled","whitelistedClientExtensions","addsWatermarks","watermarkPosition","name","disableHotlinkProtection","disableDownloadLogging","cdnUrl","adaptorItems","toArray","changed","items","undefined","add","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3UsePathStyleEndpoint","awsS3ACL","option","hasOwnProperty","children","push","trust","description","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","preventDefault","alerts","dismiss","successAlert","components","initializers","extensionData","registerPage","registerPermission","label","permission","allowGuest","setPrototypeOf","_inheritsLoose","subClass","superClass","prototype","create","constructor","_setPrototypeOf","o","p","__proto__"],"sourceRoot":""}